# üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤

## –î–ª—è —Å–ª–∞–±—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ Ubuntu 22.04 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone <your-repo-url>
cd <repo-name>
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp .env.example .env
nano .env
```

### 3. –ó–∞–ø—É—Å–∫ (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç)

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (32MB RAM –Ω–∞ –±–æ—Ç)
```bash
docker compose up -d
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (128MB RAM –Ω–∞ –±–æ—Ç)
```bash
docker compose -f docker-compose.fast.yml up -d
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
docker compose ps
docker compose logs
```

### 5. –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
docker compose down
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Ubuntu 22.04 LTS
- Docker –∏ Docker Compose
- –ú–∏–Ω–∏–º—É–º 128MB RAM
- 1GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

## ‚ö° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Alpine Linux (50MB –≤–º–µ—Å—Ç–æ 400MB)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Ç–æ–ª—å–∫–æ 3 –ø–∞–∫–µ—Ç–∞)
- –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ (10-15 —Å–µ–∫—É–Ω–¥)
- –ù–∏–∑–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker (3 —Å–ø–æ—Å–æ–±–∞)

#### –°–ø–æ—Å–æ–± 1: –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Docker
```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin -y
```

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Snap (–µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
```bash
sudo snap install docker
sudo addgroup --system docker
sudo adduser $USER docker
newgrp docker
```

#### –°–ø–æ—Å–æ–± 3: –ë–µ–∑ Docker (—Ç–æ–ª—å–∫–æ Python)
```bash
# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É Docker –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ Python
echo "–ó–∞–ø—É—Å–∫ –±–µ–∑ Docker - –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —à–∞–≥—É 3"
```

### 3. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone <YOUR_GITHUB_REPO_URL>
cd "–†–∞–±–æ—á–∏–µ –±–æ—Ç—ã"

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
nano .env  # –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ —Ç–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

#### –í–∞—Ä–∏–∞–Ω—Ç A: –° Docker (–±—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞)
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
docker --version

# –ë–´–°–¢–†–´–ô –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Alpine Linux (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–π —Å–±–æ—Ä–∫–µ)
docker compose -f docker-compose.fast.yml up -d

# –ò–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ (–º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º)
docker compose -f docker-compose.optimized.yml up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker compose -f docker-compose.fast.yml ps
```

**–í–∞–∂–Ω–æ:** 
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∫–æ–º–∞–Ω–¥—ã `apt update` –∏ `apt upgrade` **–ù–ï –ù–£–ñ–ù–´**!
- –ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –∏–¥–µ—Ç –æ—á–µ–Ω—å –¥–æ–ª–≥–æ (>5 –º–∏–Ω—É—Ç), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker-compose.fast.yml` - –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Alpine Linux –∏ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ 3-5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Ç–∏–ø–∞ "ERROR [bot_p 2/7] RUN apt-get update" –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ã—Å—Ç—Ä—É—é –≤–µ—Ä—Å–∏—é

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ë–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö)
```bash
# –ó–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤
chmod +x deploy.sh
./deploy.sh

# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - –∑–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
cd "–†–∞–±–æ—á–∏–µ –±–æ—Ç—ã"
python3 -c "
import http.server, socketserver, os
os.chdir('web')
with socketserver.TCPServer(('', 8080), http.server.SimpleHTTPRequestHandler) as httpd:
    print('–í–µ–±-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8080')
    httpd.serve_forever()
"
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Python (–±–æ—Ç—ã)
ps aux | grep python

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
sudo netstat -tlnp | grep :8080

# –û—Ç–∫—Ä—ã—Ç–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞: http://your-server-ip:8080
```

### 6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö Python –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pkill -f python3

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤
./deploy.sh

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
docker compose -f docker-compose.optimized.yml down
```

## –†–µ—à–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º

### Docker –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–æ—Å–æ–± 3 (–±–µ–∑ Docker)
# –ò–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ snap:
sudo snap install docker
```

### –ü–æ—Ä—Ç 8080 –∑–∞–Ω—è—Ç
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å
sudo lsof -i :8080

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
sudo kill -9 <PID>
```

### –ë–æ—Ç—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
cat .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -f logs/*.log

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --force-reinstall -r requirements.txt
```

### –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall
sudo ufw allow 8080

# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
python3 -c "
import http.server, socketserver, os
os.chdir('web')
class Handler(http.server.SimpleHTTPRequestHandler):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
with socketserver.TCPServer(('0.0.0.0', 8080), Handler) as httpd:
    print('–°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://0.0.0.0:8080')
    httpd.serve_forever()
"
```

## –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –±–æ—Ç–æ–≤
sudo tee /etc/systemd/system/telegram-bots.service > /dev/null <<EOF
[Unit]
Description=Telegram Bots
After=network.target

[Service]
Type=forking
User=$USER
WorkingDirectory=$HOME/"–†–∞–±–æ—á–∏–µ –±–æ—Ç—ã"
ExecStart=$HOME/"–†–∞–±–æ—á–∏–µ –±–æ—Ç—ã"/deploy.sh
Restart=always

[Install]
WantedBy=multi-user.target
EOF

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl daemon-reload
sudo systemctl enable telegram-bots.service
sudo systemctl start telegram-bots.service
```

–¢–µ–ø–µ—Ä—å –≤–∞—à–∏ –±–æ—Ç—ã –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å!